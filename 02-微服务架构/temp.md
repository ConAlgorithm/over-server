### 2.1 雪崩应对

在分布式微服务架构中，一个业务的调用会往往会跨越两到多个服务进程，整个调用链路上的同步调用等待的瓶颈会由最慢的服务决定。如果存在A同步调用B，得到结果后同步调用C，这样的调用很容易产生雪崩效应，比如C服务宕机，则示例的业务将会直接等待超时，占用大量的资源。  

常用解决雪崩的方法有：
- 超时策略：设置较短的超时可以解决服务级联调用产生的阻塞问题。但是一个请求从发出到收到响应的时间是不确定的，在微服务架构中，需要根据成功调用一个服务调用链的平均时间来合理配置服务接口超时时间
- 熔断器机制：熔断器的模式使用断路器来检测故障是否已得到解决，防止请求反复尝试执行一个可能会失败的操作（超时时，rpc框架会依据业务执行重试、补偿策略），从而减少等待纠正故障的时间，该方案相对于超时策略更加灵活



## 四 RPC框架与分布式服务框架

RPC框架的通信方式是点对点的，即服务消费者与服务提供者是点对点通信的，点对点通信包括：通信、序列化、反序列化、协议等内容。  

分布式服务框架不仅仅包含RPC框架的特性，还包括：
- 负载均衡策略：对多台服务器的服务进行负载均衡
- 服务自动化注册、发布
- 服务治理

大规模应用服务化后，服务治理的问题会渐渐暴露出来，纯粹的RPC框架服务治理能力不健全，要解决这些问题，必须通过服务框架和服务治理来完成。  


市面上一些流行的服务治理系统：
- go-micro：golang著名的服务治理框架，内部支持 go rpc、grpc多种rpc框架
- Spring Cloud：Java生态的微服务集成框架