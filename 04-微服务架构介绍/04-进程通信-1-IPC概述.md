## 一 进程通信（IPC）方式

传统单体应用中，模块之间通信依靠的是语言级的方法调用，开发人员通常不考虑进程间通信。  

在分布式系统中，服务实例通常是在多台机器上运行的进程，实例之间必须使用进程通信进行交互。  

常见进程间通信机制：
- 基于同步请求、响应的通信机制：REST/rpc
- 基于异步消息的通信机制：AMQP/STOMP等  

客户端与服务端之间的交互方式也需要考虑
- 一对一还是一对多：
  - 一对一：每个客户端请求由一个服务实例处理
  - 一对多：每个客户端请求由多个服务实例处理
- 同步还是异步：
  - 同步：客户端请求需要实时响应，等待期间会阻塞
  - 异步：客户端请求不要求实时，等待是非阻塞的

这两个维度的互相交叉会诞生多种技术方案：
| 维度 | 一对一 | 一对多 |  
|------|------|------|
| 同步模式 | 请求/响应 | 无 |
| 异步模式 | 异步请求/响应 单向通知 | 发布/订阅 发布/异步响应 |

一对一方式交互时候的场景：
- 请求/响应：客户端发出请求后等待服务器响应，等待过程会造成线程阻塞
- 异步请求/响应：服务端对请求进行异步响应，等待响应中不会阻塞线程，因为服务端的响应不会马上返回
- 单向通知：客户端的请求不期望服务端做出任何响应

一对多方式交互时候的场景：
- 发布/订阅：客户端发布通知消息，被0-多个感兴趣的服务订阅
- 发布/异步响应：客户端发布请求消息，然后等待从感兴趣的服务发回的响应

## 二 通信的消息格式

通信时候，传递的消息（数据）格式也不尽相同，有：
- 基于文本：JSON/XML。可读性高，但是消息较为冗长会造成额外开销
- 基于二进制：Avro/Protocol Buffers。不具备可读性，但体积小，开销小