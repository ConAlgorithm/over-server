## 三 docker容器

### 3.0 docker容器概述

Docker将镜像文件运行起来后，产生的对象就是容器，容器相当于是镜像运行起来的一个实例，类似于常见的虚拟机的概念。**容器的本质其实是镜像在启动时，Docker在镜像最顶层加载了一个读写文件系统作为了容器！**  

容器与虚拟机的相同点：
- 容器和虚拟机一样，都会对物理硬件资源进行共享使用。 
- 容器和虚拟机的生命周期比较相似(创建、运行、暂停、关闭等等)。
- 容器中或虚拟机中都可以安装各种应用，如redis、mysql、nginx等。也就是说，在容器中的操作，如同在一个虚 拟机(操作系统)中操作一样。
- 同虚拟机一样，容器创建后，会存储在宿主机上:linux上位于/var/lib/docker/containers下

容器与虚拟机的不同点：
- 虚拟机的创建、启动和关闭都是基于一个完整的操作系统。一个虚拟机就是一个完整的操作系统。而容器直接运行在宿主机的内核上，其本质上以一系列进程的结合。
- 容器是轻量级的，虚拟机是重量级的。
  - 首先容器不需要额外的资源来管理，虚拟机额外更多的性能消耗;
  - 其次创建、启动或关闭容器，如同创建、启动或者关闭进程那么轻松，而创建、启动、关闭一个操作系统就没那么方便了。
- 也因为轻量，在给定的硬件上能运行更多数量的容器，甚至可以直接把Docker运行在虚拟机上。

### 3.1 容器常用命令

贴士：容器名和容器id的作用相同
```
docker ps                       # 查看容器列表，-a参数会显示所有运行过的镜像

docker run                      # 快速创建并启动一个新容器，如下所示：以centos镜像为基础，创建一个名为mycentos1的镜像
                                # docker run -i -t --name=mycentos1  centos:latest /bin/bash
                                # 参数 -i 表示将当前shell的 STDIN连接到容器上
                                # 参数 -t 表示分配虚拟终端tty，多个参数可以合并，如：-it
                                # 参数 -d 表示守护进程启动
                                # 参数 -p 映射容器的端口为宿主机的端口，如安装mysql可以 -p 3306:3306  前者为宿主机端口，后者为容器端口

exit                            # 退出容器：命令可以在容器内退出容器，回到宿主机，但是会造成容器运行停止

docker exec 容器名               # 使用该命令可以进入以守护进程创建的容器
                                # 示例：docker exec mycentos1 /bin/bash

docker create 容器名             # 创建容器，是docker run的分解动作之一
docjer start 容器名              # 启动容器，是docker run的分解动作之一，后面可以跟 容器名称或者容器ID    

docker inspect 容器名            # 查看容器详细信息
docker logs 容器名               # 查看容器日志
docker rename 容器名 新容器名称    # 重命名容器
docker port 容器名               # 查看容器端口

# 查看容器网络信息：
docker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' 930f29ccdf8a
```

### 3.2  容器的关闭、终止、删除

```
docker stop 容器名              # 关闭：延迟关闭一个或多个处于暂停状态或者运行状态的容器 
docker kill 容器名              # 终止：强制并立即关闭一个或多个处于暂停状态或者运行状态的容器

docker rm 容器名                # 删除已关闭容器，-f 参数可以删除正在运行的容器
                               # 批量删除示例：docker rm -f $(docker ps -a -q)
```